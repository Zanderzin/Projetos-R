---
title: "Colinha da Prova de R"
author: "Bernardo Alexander"
date: "2024-09-04"
output:
  prettydoc::html_pretty:
    theme: leonids
    toc: true         # Ativa o índice
    toc_depth: 2      # Define a profundidade dos títulos no índice
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

#Criando Indice do HTML:
```{r include=FALSE}
library(knitr)
library(dplyr)
library(ggplot2)

```


# Introdução

###### Variáveis: 
Uma variável em R é um nome que você dá a um valor ou a um conjunto de valores em seu código. Ela permite que você armazene
e manipule esses valores para uso posterior em seu programa.

###### Vetor:
Armazena um conjunto de valores ordenados chamados de elementos. Todos os elementos de um vetor devem ser do mesmo tipo.

###### Fator:
Armazena valores categóricos (nominal ou ordinal).
Data frame: É utilizado para organizar elementos em linhas e colunas, semelhante a uma planilha ou base de dados. Além disso, pode ser
formado por listas ou vetores.

###### Matriz:
Armazena dados tabulares semelhante ao data frame, porém só aceita um tipo de dado.

###### Lista:
É um tipo especial de vetor, porém é possível adicionar elementos de tipos diferentes.

###### Strings:
São essencialmente texto - uma sequência de caracteres. Em R, uma string pode conter letras, números, e símbolos
Estruturas de Repetição: Estruturas de repetição são usadas para executar o mesmo bloco de código múltiplas vezes. As estruturas de
repetição mais comuns em R são os loops for e while.

###### Controles de Fluxo:
Controle de fluxo refere-se à decisão do programa sobre que bloco de código executar, dependendo de uma ou mais
condições.

###### Gráficos:
Os gráficos são ferramentas poderosas na análise de dados, e o ggplot2 é uma biblioteca robusta e flexível para a criação de gráficos
no R.

###### Pacote Dplyr:
Foi desenvolvido para simplificar muitas das tarefas mais comuns e complexas em análise de dados. Seu design é intuitivo e sua
sintaxe, concisa.

###### Funções da família apply:
A família apply consiste em um conjunto de funções que oferecem uma maneira de aplicar uma função a partes de
uma estrutura de dados (como matrizes, listas ou data frames) e, em seguida, retornar um resultado consolidado.

# Manipulação de Vetores no R
```{r echo=TRUE}
cidade <- c("Brasília", "São Paulo", "Rio de Janeiro", "Porto Alegre"
)
print(cidade)
temperatura <- c(32,22,35,17)
região <- c(1,2,3,4)
#Acessando o primeiro elemento do seu vetor
cidade[1]
cidade[3]
```

### Copiando vetores
```{r echo=TRUE}
cidade2 <- cidade
cidade2
#Adicionar um novo elemento
cidade2[5] <- "Curitiba"
cidade2
#Excluindo um elemento do seu vetor
temperatura[-2]
#Alterando um vetor
cidade2[3] <- "Belo Horizonte"
#Adicionar um novo elemento
cidade2[5] <- "Curitiba"
cidade2
```

# Manipulação de Fatores no R
```{r echo=TRUE}
# Criação de fatores
dias <- c("seg", "ter", "qua", "qui", "sex")
fator_dias <- factor(dias)
#Níveis nos fatores
levels(fator_dias) <- c(levels(fator_dias),"sab", "dom")
print(fator_dias)
#Convertendo Fator em Vetor
dias_vetor <- as.character(fator_dias)
print(dias_vetor)
```

# Manipulação de Data Frames no R
```{r echo=TRUE}
# Observar o dataframe
data("murders")
str("murders")
head("murders")
names("murders")
```

# Manipulação de Matrizes no R
```{r echo=TRUE}
# Desenvolvendo matrizes no R:
matriz <- matrix(1:6, nrow=2, ncol=3)
print(matriz)
# Atribuir nomes às linhas
rownames(matriz) <- c("Preço1", "Preço2")
# Atribuir nomes às colunas
colnames(matriz) <- c("Banana", "Maca", "Laranja")
print(matriz)
# Acessando Elementos
matriz[1,2] # Retorna o elemento da primeira linha e segunda coluna.
# Acessando diversos elementos da matriz
M <- matriz 
M[2,1]
M[2, ]
M[ ,2]
M[ ,1:2]
M[1:2,1]

```

# Manipulação de Listas no R
```{r echo=TRUE}
# Criando uma lista e atrelando a nomes
minha_lista <- list(nome = "Abner", idade = 30, notas = c(8, 9, 10))
# Acessar o campo nome 1ª Forma
minha_lista$nome # Saída: "Abner"
# Acessar o campo nome 2ª Forma
minha_lista[[1]] # Saída: "Abner"
# Criar uma lista com diferentes tipos de dados
exemplo_lista <- list(inteiro = 1, texto = "Oi", booleano = TRUE)

# Criar uma lista que contém outra lista
lista_aninhada <- list(primeira_lista = exemplo_lista, numero = 42)
# Acessar um elemento dentro de uma lista aninhada
lista_aninhada$primeira_lista$texto # Deverá retornar "Oi"
```

# Organização de Dados no R
```{r echo=TRUE}
# Ordenação de vetores
vetor <- c(4, 1, 7, 2)
sort(vetor) # Saída: 1 2 4 7
sort(vetor, decreasing = TRUE) # Saída: 7, 4, 2, 1

# Carregar o pacote dplyr
install.packages("dplyr")
library(dplyr)
# Criar um dataframe de exemplo
df <- data.frame(nome = c("Ana", "Bob", "Cid"), idade = c(23, 45, 19))
# Ordenar por idade
df_ordenado <- arrange(df, idade)
print(df_ordenado)
```

# Strings no R
```{r echo=TRUE}
# Conversão para Maiúsculas e Minúsculas
texto <- "Ciência de Dados"
tolower(texto) # "ciência de dados"
toupper(texto) # "CIÊNCIA DE DADOS"
# Substituição de Texto
sub("Ciência", "Engenharia", texto) # "Engenharia de Dados"
# Encontrando e Extraindo Substrings
substr(texto, 1, 7) # "Ciência"

#Função paste:
paste("Ciência", "de", "Dados") # "Ciência de Dados"
paste("Ciência", "de", "Dados", sep = "_") # "Ciência_de_Dados"
```

# Estruturas de Dados no R

###### For:
Usa-se quando o número de iterações é conhecido.

###### While:
Usa-se quando não se sabe o número de iterações e a execução depende de
uma condição.

###### If:
Para condicionar decisões.

###### If-else:
Para tomar decisões.

###### Repeat:
Para repetir um bloco até que uma condição seja verdadeira.

###### Break:
Para sair de um loop.

###### Next:
Para pular a iteração atual de um loop.

```{r echo=TRUE}
#Na prática:
# Imprimir os números de 1 a 5 usando o “for”
for(i in 1:5) {
 print(i)
}
# Somando Números de 1 a 10 com a função “for”
soma <- 0
for (i in 1:10) {
soma <- soma + i
}
```

# Gráficos no R
```{r echo=TRUE}
# Gráfico de Dispersão
ggplot(data = mpg, aes(x = displ, y = hwy)) +
geom_point()
# Gráfico de Barras
ggplot(data = mpg, aes(x = class)) +
geom_bar()
# Gráfico de Linhas
ggplot(data = economics, aes(x = date, y = unemploy)) +
geom_line()
```

# Pacote Dplyr

###### Filter():
Filtra linhas com base em condições.

###### Select():
Seleciona colunas específicas de um data frame.

###### Arrange():
Organiza ou reordena linhas com base em colunas. Pode ser ascendente
ou descendente.

###### Mutate():
Modifica ou cria novas colunas usando dados existentes.

###### Summarise() (ou summarize()):
Resume ou agrega dados, como calcular médias, somas etc.

###### Group_by():
Divide os dados em grupos com base em uma ou mais colunas. Muitas
vezes usado em conjunto com summarise() para agregar dados por grupo.

###### Join functions (e.g., inner_join, left_join):
Usadas para combinar data frames, similar
ao SQL.

```{r echo=TRUE}
# Criando um exemplo de data frame
df <- data.frame(
Nome = c("Ana", "Bruno", "Carlos", "Dani", "Eva"),
Idade = c(23, 31, 29, 35, 42),
Score = c(87, 90, 78, 85, 92)
)
# Função filter() - Filtrar linhas onde a idade é maior que 30
df_filtrado <- filter(df, Idade > 30)
# Função mutate() - Criar uma nova coluna chamada "Categoria" baseada na Idade
df_mutate <- mutate(df, Categoria = ifelse(Idade > 30, "Senior", "Junior"))
# Função summarise() - Calcular a média de idade e score
df_resumo <- summarise(df, Media_Idade = mean(Idade), Media_Score = mean(Score))
```

# Funções da família apply

###### apply():
Esta é a função básica da família. Ela é usada principalmente com matrizes. Permite que você aplique uma função às linhas ou colunas de uma matriz.

###### lapply():
É uma função que atua em listas ou vetores. Ela aplica uma função a cada elemento e sempre retorna uma lista.

###### sapply():
Similar ao lapply, mas tenta simplificar o resultado final, tornando-o mais
intuitivo. Em vez de sempre retornar uma lista, como o lapply, o sapply tentará retornar um vetor, matriz ou array se possível.

###### tapply():
Esta função é interessante quando você tem um vetor de dados e quer aplicar uma função a subgrupos deste vetor. Ela é frequentemente usada em
combinação com fatores.

###### mapply(): É uma versão multivariada da função lapply. Ela aplica uma função em múltiplos argumentos, geralmente argumento a argumento.

```{r echo=TRUE}
#Criem uma matriz
mat <- matrix(1:9, ncol=3)
# Soma por coluna com apply
apply(mat, 2, sum)
#Criem uma lista
lista <- list(a=1:5, b=6:10)
# Calcula a média de cada elemento da lista com lapply
lapply(lista, mean)
# Aplica uma função sobre subgrupos de um vetor
notas <- c(7, 8, 9, 6, 8)
turmas <- c('A', 'A', 'B', 'B', 'B')
#Média de notas por turma com tapply
tapply(notas, turmas, mean)
```



















